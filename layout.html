<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>DoTell task</title>
  </head>

  <body style="background-color: {{style.backgroundColor}}">
    <script src="https://kit.fontawesome.com/af9bab70c0.js" crossorigin="anonymous"></script>

    <h2 class='scroll'>Scroll Down Please</h2>
    <section class="counter-block">
      <div class="container" id="counter">
        <h1 id="ad" style="font-size: {{style.titleFontSize}}; color: {{style.textColor}};">{{title}}</h1>
        <div class="row justify-content-center">
          {{#each sections}}
          <div class="colNum">
            <i class="{{icon}}" style="color: {{../style.numbersColor}}; font-size:{{../style.numbersFontSize}};"></i>
            <span
              style="color: {{../style.numbersColor}}; font-size:{{../style.numbersFontSize}};">{{number.prefix}}</span>
            <span class="count"
              style="color: {{../style.numbersColor}}; font-size:{{../style.numbersFontSize}};">{{number.value}}</span>
            <span
              style="color: {{../style.numbersColor}}; font-size:{{../style.numbersFontSize}};">{{number.suffix}}</span>
            <p style="color: {{../style.textColor}}">{{paragraph}}</p>
          </div>
          {{/each}}
        </div>
      </div>

    </section>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inview/1.0.0/jquery.inview.min.js"
      integrity="sha512-dy8Q+KMsxJmEgLqvZA7kk/Pcaij/OhCK1LPj+oGuxfd/tcbbqrDSGOtiXNfzKbMun+ZBnQsTWUnhuXhVkISDOA=="
      crossorigin="anonymous"></script>

    <script>
      $('.colNum').bind('inview', function (event, visible, visiblePartX, visiblePartY) {
        if (visible) {
          $(this).find('.count').each(function () {
            var $this = $(this);
            $({
              Counter: 0
            }).animate({
              Counter: $this.text()
            }, {
              duration: "{{numbersRunningSpeedMilisecond}}",
              easing: 'swing',
              step: function () {
                $this.text(Math.ceil(this.Counter));
              }
            });
          });
          $(this).unbind('inview');
        }
      });


      //changing column class depending of number of elements added
      //in this case, 12 is max number of elements available in one row
      function colNumChange() {
        let customRow = $('.row');
        let colNum = $("#counter .row > div").length;
        let col = $(".colNum");
        if (colNum === 1) {
          col.addClass("col-sm-12 col-md-12 col-lg-12");
        }
        if (colNum === 2) {
          col.addClass("col-sm-6 col-md-6 col-lg-6");
        }
        if (colNum === 3) {
          col.addClass("col-sm-4 col-md-4 col-lg-4");
        }
        if (colNum === 4) {
          col.addClass("col-sm-3 col-md-3 col-lg-3");
        }
        if (colNum === 5) {
          customRow.addClass("five-cols");
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
        if (colNum === 6) {
          col.addClass("col-sm-2 col-md-2 col-lg-2");
        }
        if (colNum === 7) {
          customRow.addClass("seven-cols");
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
        if (colNum === 8) {
          customRow.addClass("eight-cols");
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
        if (colNum === 9) {
          customRow.addClass("nine-cols");
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
        if (colNum === 10) {
          customRow.addClass("ten-cols");
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
        if (colNum === 11) {
          customRow.addClass("eleven-cols");
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
        if (colNum === 12) {
          col.addClass("col-sm-1 col-md-1 col-lg-1");
        }
      }

      colNumChange();
    </script>
  </body>

</html>